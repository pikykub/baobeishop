<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAOBEI SHOP - PREMIUM STORE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <style>
        :root { --main: #ff2d55; --bg: #fff5e6; --card-bg: #ffffff; --bank: #5d2e8e; --text: #2d3436; --line: #06C755; --danger: #dc3545; --bot: #007bff; --coupon: #ff9f43; --fb: #1877F2; }
        * { box-sizing: border-box; }
        body { 
            font-family: 'Kanit', sans-serif; 
            margin: 0; 
            background-color: var(--bg); 
            background-repeat: no-repeat; 
            background-position: center center; 
            background-attachment: fixed; 
            background-size: cover; 
            color: var(--text); 
            overflow-x: hidden; 
            min-height: 100vh;
            transition: background 0.5s ease; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° transition ‡πÉ‡∏´‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• */
        }
        /* ... (‡∏Ñ‡∏á CSS ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) ... */
        .scrolling-news { background: #000; color: gold; padding: 8px 0; overflow: hidden; white-space: nowrap; position: relative; z-index: 2000; border-bottom: 2px solid gold; font-size: 14px; }
        .scrolling-news div { display: inline-block; padding-left: 100%; animation: marquee 20s linear infinite; }
        @keyframes marquee { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }
        .announcement { background: rgba(34, 34, 34, 0.9); color: #fff; padding: 10px; text-align: center; font-size: 13px; font-weight: 300; position: relative; z-index: 10; }
        #snowCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .navbar { background: rgba(255, 255, 255, 0.95); padding: 10px 5%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 15px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; backdrop-filter: blur(5px); }
        .logo { font-size: 22px; font-weight: bold; color: var(--main); cursor: pointer; text-shadow: 1px 1px 2px rgba(0,0,0,0.05); }
        .nav-right { display: flex; gap: 10px; align-items: center; }
        .btn-auth { background: #eee; color: #555; padding: 8px 15px; border-radius: 50px; text-decoration: none; font-size: 14px; font-weight: 500; transition: 0.3s; display: flex; align-items: center; justify-content: center; height: 40px; cursor: pointer; border: none; }
        .btn-auth:hover { background: var(--line); color: white; transform: scale(1.05); }
        .balance-tag { background: var(--main); color: white; padding: 8px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 10px rgba(255, 45, 85, 0.3); }
        .balance-tag:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(255, 45, 85, 0.4); }
        .cart-tag { background: #333; color: white; padding: 8px 15px; border-radius: 50px; font-weight: bold; cursor: pointer; position: relative; display: flex; align-items: center; gap: 8px; }
        .cart-count { position: absolute; top: -5px; right: -5px; background: gold; color: black; font-size: 10px; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid #fff; font-weight: bold; }
        .btn-add-cart { background: #333; color: white; border: none; width: 100%; padding: 10px; border-radius: 12px; font-weight: 500; cursor: pointer; margin-top: 5px; transition: 0.3s; font-size: 13px; }
        .btn-add-cart:hover { background: #000; }
        .btn-admin { background: #333; color: gold; padding: 8px 15px; border-radius: 50px; font-size: 14px; font-weight: bold; display: none; cursor: pointer; border: none; transition: 0.3s; }
        .btn-admin:hover { background: #000; color: #fff; }
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; position: relative; z-index: 5; }
        .title-bar { display: flex; justify-content: space-between; align-items: center; border-left: 6px solid var(--main); padding-left: 15px; margin-bottom: 35px; background: rgba(255, 255, 255, 0.85); border-radius: 0 10px 10px 0; box-shadow: 2px 2px 10px rgba(0,0,0,0.05); padding-right: 15px; }
        .banner-container { width: 100%; margin-bottom: 30px; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.15); transition: 0.3s; }
        .banner-img { width: 100%; height: auto; display: block; object-fit: cover; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px; }
        .stat-box { background: rgba(26, 26, 26, 0.85); color: white; padding: 20px; border-radius: 15px; display: flex; flex-direction: column; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s; text-align: center; backdrop-filter: blur(5px); }
        .stat-box:hover { border-color: var(--main); transform: translateY(-5px); }
        .stat-label { font-size: 13px; color: #aaa; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 1px; }
        .stat-value { font-size: 24px; font-weight: bold; color: #fff; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 25px; }
        .product-card { background: rgba(255,255,255,0.9); border-radius: 20px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: 0.4s; position: relative; border: 1px solid rgba(255,255,255,0.5); backdrop-filter: blur(10px); }
        .product-card:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0,0,0,0.15); }
        .stock-tag { position: absolute; top: 15px; right: 15px; background: rgba(0,0,0,0.7); color: white; padding: 5px 12px; border-radius: 50px; font-size: 11px; font-weight: bold; z-index: 2; }
        .product-img { width: 100%; height: 200px; object-fit: contain; padding: 20px; transition: 0.3s; }
        .product-card:hover .product-img { transform: scale(1.05); }
        .product-info { padding: 20px; text-align: center; border-top: 1px solid #f1f1f1; background: #fff; }
        .product-name { font-weight: 500; margin-bottom: 10px; height: 45px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
        .product-price { color: var(--main); font-size: 22px; font-weight: 700; margin-bottom: 15px; }
        .btn-buy { background: var(--main); color: white; border: none; width: 100%; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-buy:hover:not(:disabled) { background: #e61b46; transform: scale(1.02); }
        .btn-buy:disabled { background: #ccc; cursor: not-allowed; }
        .hidden { display: none !important; }
        .topup-card { background: rgba(255,255,255,0.95); padding: 30px; border-radius: 25px; text-align: center; max-width: 500px; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        #loginPage, #registerPage { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 9999; backdrop-filter: blur(8px); }
        .login-card { background: white; padding: 40px; border-radius: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 90%; max-width: 400px; text-align: center; position: relative; }
        .login-input { width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #eee; border-radius: 12px; font-family: 'Kanit'; outline: none; transition: 0.3s; }
        .login-input:focus { border-color: var(--main); }
        .btn-close-modal { position: absolute; top: 15px; right: 15px; cursor: pointer; font-size: 20px; color: #999; }
        .btn-close-modal:hover { color: #333; }
        .chat-widget { position: fixed; bottom: 100px; right: 30px; width: 320px; height: 450px; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); display: flex; flex-direction: column; overflow: hidden; z-index: 2500; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform: translateY(20px) scale(0.9); opacity: 0; pointer-events: none; }
        .chat-widget.active { transform: translateY(0) scale(1); opacity: 1; pointer-events: auto; }
        .chat-header { background: var(--main); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
        .chat-tabs { display: flex; border-bottom: 1px solid #eee; background: #f8f9fa; }
        .chat-tab { flex: 1; padding: 10px; text-align: center; font-size: 13px; cursor: pointer; transition: 0.3s; color: #999; border-bottom: 2px solid transparent; }
        .chat-tab.active { color: var(--main); border-bottom: 2px solid var(--main); background: #fff; font-weight: bold; }
        .chat-messages { flex: 1; padding: 15px; overflow-y: auto; background: #f9f9f9; font-size: 14px; display: flex; flex-direction: column; }
        .chat-row { display: flex; align-items: flex-end; margin-bottom: 15px; gap: 8px; width: 100%; }
        .chat-row.right { flex-direction: row-reverse; }
        .chat-avatar { width: 35px; height: 35px; border-radius: 50%; object-fit: cover; border: 2px solid #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; flex-shrink: 0; transition: 0.2s; }
        .chat-avatar:hover { transform: scale(1.1); }
        .msg { padding: 8px 12px; border-radius: 15px; max-width: 75%; line-height: 1.4; word-break: break-all; position: relative; }
        .msg-admin { background: #e0e0e0; color: #333; border-bottom-left-radius: 2px; }
        .msg-user { background: var(--main); color: white; border-bottom-right-radius: 2px; }
        .msg-bot { background: linear-gradient(135deg, #007bff, #00c6ff); color: white; border-radius: 15px; border-bottom-left-radius: 2px; box-shadow: 0 2px 10px rgba(0,123,255,0.2); }
        .chat-img { max-width: 100%; border-radius: 10px; margin-top: 5px; cursor: pointer; transition: 0.2s; border: 1px solid rgba(0,0,0,0.1); }
        .chat-img:hover { opacity: 0.9; }
        .msg-sender { font-size: 10px; font-weight: bold; margin-bottom: 2px; display: block; opacity: 0.7; cursor: pointer; }
        .floating-chat { position: fixed; bottom: 30px; right: 30px; background: var(--line); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; cursor: pointer; z-index: 2000; box-shadow: 0 10px 25px rgba(6, 199, 85, 0.4); transition: 0.3s; }
        .floating-chat:hover { transform: rotate(15deg) scale(1.1); }
        .qr-section { background: #f8f9fa; padding: 15px; border-radius: 15px; margin-bottom: 20px; border: 2px dashed #ddd; }
        .slip-preview { width: 100px; height: 100px; object-fit: cover; border-radius: 10px; margin: 10px auto; border: 1px solid #ccc; display: none; }
        .btn-history { background: #333; color: #fff; border: none; padding: 8px 15px; border-radius: 10px; font-size: 13px; cursor: pointer; transition: 0.3s; }
        .btn-history:hover { background: #000; transform: scale(1.05); }
        .user-profile-btn { display: flex; align-items: center; gap: 8px; cursor: pointer; background: #f8f9fa; padding: 5px 12px; border-radius: 50px; border: 1px solid #eee; transition: 0.3s; }
        .user-profile-btn:hover { background: #fff; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .nav-avatar { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; border: 2px solid var(--main); }
        .nav-nickname { font-size: 14px; font-weight: 500; color: #333; display: flex; flex-direction: column; line-height: 1.1; text-align: left; }
        .nav-id-badge { font-size: 10px; color: #888; letter-spacing: 0.5px; }

        .contact-container { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
        .social-btn { display: flex; align-items: center; gap: 10px; padding: 12px 25px; border-radius: 50px; color: white; text-decoration: none; font-weight: bold; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2); border: 2px solid white; }
        .social-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
        .social-fb { background: var(--fb); } 
        .social-line { background: var(--line); } 

        #global-loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(5px); z-index: 10000; display: none; flex-direction: column; justify-content: center; align-items: center; }
        .spinner { width: 50px; height: 50px; border: 5px solid #ffeeba; border-top: 5px solid var(--main); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loader-text { margin-top: 15px; font-weight: bold; color: var(--main); letter-spacing: 1px; font-size: 16px; }

        @media (max-width: 600px) { 
            .chat-widget { right: 10px; width: calc(100% - 20px); bottom: 90px; }
            .stats-grid { gap: 10px; }
            .stat-value { font-size: 18px; }
            .nav-nickname { display: none; }
        }
    </style>
</head>
<body>
    <div id="global-loader">
        <div class="spinner"></div>
        <div class="loader-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...</div>
    </div>

    <div class="scrolling-news">
        <div>‚ú® BAOBEI SHOP ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö! ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á‡πÄ‡∏û‡∏µ‡∏¢‡∏ö! | üî• ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ: ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏∏‡πâ‡∏ô‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÉ‡∏´‡∏ç‡πà! | ‚ö†Ô∏è ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏°‡∏¥‡∏à‡∏â‡∏≤‡∏ä‡∏µ‡∏û ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ä‡∏∑‡πà‡∏≠ ‡∏à‡∏¥‡∏ï‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏£ ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô! ‚ú®</div>
    </div>

    <canvas id="snowCanvas"></canvas>

    <div id="registerPage" class="hidden">
        <div class="login-card">
            <i class="fas fa-times btn-close-modal" onclick="closeAuth()"></i>
            <h2 style="color: var(--main);">CREATE ACCOUNT</h2>
            <div style="font-size: 12px; color: #777; margin-bottom: 10px;">*‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á ID ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (8-12 ‡∏´‡∏•‡∏±‡∏Å)</div>
            <input type="text" id="regUsername" class="login-input" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô)">
            <input type="password" id="regPassword" class="login-input" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
            <button class="btn-buy" onclick="handleRegister()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
            <p style="font-size: 14px; margin-top: 15px;">‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? <a href="#" onclick="toggleAuth('login')" style="color: var(--main); text-decoration: none; font-weight: 500;">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a></p>
        </div>
    </div>

    <div id="loginPage" class="hidden">
        <div class="login-card">
            <i class="fas fa-times btn-close-modal" onclick="closeAuth()"></i>
            <h2 style="color: var(--main);">BAOBEI LOGIN</h2>
            <input type="text" id="loginUsername" class="login-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
            <input type="password" id="loginPassword" class="login-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
            <button class="btn-buy" onclick="handleLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            <p style="font-size: 14px; margin-top: 15px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a href="#" onclick="toggleAuth('register')" style="color: var(--main); text-decoration: none; font-weight: 500;">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></p>
            <p style="font-size: 11px; color: #aaa; margin-top: 10px;">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 15 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
        </div>
    </div>

    <div id="shopContent">
        <div class="announcement">‚ú® ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà BAOBEI SHOP | ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏π‡πÅ‡∏• 24 ‡∏ä‡∏°. ‚ú®</div>
        <nav class="navbar">
            <div class="logo" onclick="showPage('home')">BAOBEI SHOP</div>
            <div class="nav-right">
                <div class="user-profile-btn" onclick="openEditProfile()">
                    <img id="navAvatarImg" src="https://cdn-icons-png.flaticon.com/512/149/149071.png" class="nav-avatar">
                    <div id="navNickname" class="nav-nickname">
                        <span>‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°</span>
                        <span class="nav-id-badge" style="display:none;" id="navIdBadge">ID: -</span>
                    </div>
                </div>
                
                <div class="cart-tag" onclick="showCart()">
                    <i class="fas fa-shopping-cart"></i> 
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <button id="adminBtn" class="btn-admin" onclick="openAdminPanel()">
                    <i class="fas fa-user-shield"></i>
                </button>
                <div id="topupBtn" class="balance-tag" onclick="showPage('topup')" style="display:none;">
                    <i class="fas fa-wallet"></i> <span id="balanceDisplay">0</span> ‡∏ø
                </div>
                <button id="authBtn" onclick="toggleAuth('login')" class="btn-auth"><i class="fas fa-sign-in-alt"></i> ¬†‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </nav>

        <div class="container">
            <div id="homePage">
                <div class="banner-container">
                    <img id="mainBannerImg" src="https://lh3.googleusercontent.com/d/1ALVIB9eXw_BXz1By7UBemWyY_0Gp-YoF" alt="Banner" class="banner-img">
                </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                        <div class="stat-value"><span id="statStock">0</span> <small style="font-size: 12px; font-weight: 300;">‡∏ä‡∏¥‡πâ‡∏ô</small></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</div>
                        <div class="stat-value"><span id="statUsers">...</span> <small style="font-size: 12px; font-weight: 300;">‡∏Ñ‡∏ô</small></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏™‡∏∞‡∏™‡∏°</div>
                        <div class="stat-value"><span id="statSalesTotal">...</span> <small style="font-size: 12px; font-weight: 300;">‡∏ö‡∏¥‡∏•</small></div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô</div>
                        <div class="stat-value"><span id="statTopupTotal">...</span> <small style="font-size: 12px; font-weight: 300;">‡∏ø</small></div>
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 10px; font-weight: 500; color: #555; letter-spacing: 1px;">‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
                <div class="contact-container">
                    <a href="https://www.facebook.com/share/1AYfq313Xe/?mibextid=wwXIfr" target="_blank" class="social-btn social-fb">
                        <i class="fab fa-facebook-f"></i> Facebook
                    </a>
                    <a href="https://line.me/R/ti/p/@989lkmme" target="_blank" class="social-btn social-line">
                        <i class="fab fa-line"></i> Line Official
                    </a>
                </div>
                
                <div class="title-bar">
                    <h2><i class="fas fa-shopping-bag"></i> ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>
                    <button id="historyBtn" class="btn-history" onclick="showOrderHistory()" style="display:none;"><i class="fas fa-history"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠</button>
                </div>
                <div id="productList" class="product-grid"></div>
            </div>

            <div id="topupPage" class="hidden">
                <div class="topup-card">
                    <h3 style="margin-top:0"><i class="fas fa-university"></i> ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3>
                    
                    <div class="qr-section">
                        <p style="font-weight: bold; color: var(--bank); margin: 5px 0;">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏≤‡∏Ñ‡∏¥‡∏ô‡∏†‡∏±‡∏ó‡∏£ (KKP)</p>
                        <p style="font-size: 20px; letter-spacing: 1px; font-weight: bold; color: #000;">201-201-9014</p>
                        <div style="height: 1px; background: #eee; margin: 10px 0;"></div>
                        <p style="font-weight: bold; color: #f59e0b; margin: 5px 0;">TrueMoney Wallet</p>
                        <p style="font-size: 20px; letter-spacing: 1px; font-weight: bold; color: #000;">080-920-0932</p>
                        <p style="font-size: 14px; margin: 10px 0 0 0;">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: ‡∏à‡∏¥‡∏ï‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏£</p>
                        <img id="qrCodeImg" src="https://lh3.googleusercontent.com/d/1ardGOoNH5cU-qLoTaZ7VHLs8kUCriNmX" alt="QR Code" style="margin-top: 15px; width: 180px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    </div>
                    
                    <div style="background:#fff3cd; color:#856404; padding:10px; border-radius:10px; font-size:13px; margin-bottom:15px; border:1px solid #ffeeba;">
                        <b>‚ö†Ô∏è ‡πÅ‡∏à‡πâ‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô:</b> ‡∏´‡∏≤‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏¢‡∏≠‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤ ‡πÅ‡∏à‡πâ‡∏á "‡πÄ‡∏•‡∏Ç ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" ‡∏Å‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
                    </div>

                    <input type="number" id="topupAmount" class="login-input" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏≠‡∏ô">
                    
                    <div style="margin-top: 10px;">
                        <label for="slipInput" style="display: block; cursor: pointer; background: #f0f0f0; padding: 12px; border-radius: 12px; font-size: 14px; border: 1px solid #ddd;">
                            <i class="fas fa-file-invoice"></i> ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
                        </label>
                        <input type="file" id="slipInput" accept="image/*" class="hidden" onchange="previewSlip(this)">
                        <img id="slipPreviewImg" class="slip-preview">
                    </div>

                    <button class="btn-buy" onclick="submitTopup()" style="margin-top: 20px;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô</button>
                    <p onclick="showPage('home')" style="cursor:pointer; margin-top:20px; color:#999; font-size: 14px;"><i class="fas fa-chevron-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</p>
                </div>
            </div>
        </div>
    </div>

    <div class="chat-widget" id="chatBox">
        <div class="chat-header">
            <span><i class="fas fa-comments"></i> <span id="chatTitle">Global Chat</span></span>
            <i class="fas fa-times" style="cursor:pointer" onclick="toggleWebChat()"></i>
        </div>
        <div class="chat-tabs">
            <div id="tabGlobal" class="chat-tab active" onclick="setChatMode('global')">‡πÅ‡∏ä‡∏ó‡∏£‡∏ß‡∏°</div>
            <div id="tabPrivate" class="chat-tab" onclick="setChatMode('private')">‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß)</div>
        </div>
        <div class="chat-messages" id="chatMessages"></div>
        <div style="padding: 10px; border-top: 1px solid #eee; display: flex; gap: 5px; background: #fff; align-items: center;">
            <input type="file" id="chatImageInput" hidden accept="image/*" onchange="handleChatImage(this)">
            <button onclick="document.getElementById('chatImageInput').click()" style="background: #eee; color: #555; border:none; width: 35px; height: 35px; border-radius: 50%; cursor:pointer; flex-shrink: 0;"><i class="fas fa-image"></i></button>
            <input type="text" id="chatInput" style="flex:1; border: 1px solid #ddd; padding: 8px 12px; border-radius: 20px; outline:none;" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...">
            <button onclick="sendChat()" style="background: var(--main); color:white; border:none; width: 35px; height: 35px; border-radius: 50%; cursor:pointer; flex-shrink: 0;"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
    <div class="floating-chat" onclick="toggleWebChat()"><i class="fas fa-comment-dots"></i></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // ... (Config Firebase) ...
        const firebaseConfig = {
          apiKey: "AIzaSyDEknKwZ39jTy_vnsazCjE63EAlBIVXk4o",
          authDomain: "baobei-shop-81226.firebaseapp.com",
          databaseURL: "https://baobei-shop-81226-default-rtdb.firebaseio.com",
          projectId: "baobei-shop-81226",
          storageBucket: "baobei-shop-81226.firebasestorage.app",
          messagingSenderId: "204448093148",
          appId: "1:204448093148:web:6ddadd6d03c599cfeab519"
        };

        let app, db;
        try {
            app = initializeApp(firebaseConfig);
            db = getDatabase(app);
            console.log("Firebase Connected");
        } catch (e) {
            console.error("Firebase Error: ", e);
        }

        window.showLoader = function(show) { document.getElementById('global-loader').style.display = show ? 'flex' : 'none'; }

        // State & Initial Data
        let state = {
            users: {},
            products: [
                { id: 1, name: "email(‡∏ô‡∏≠‡∏Å) ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏™‡∏¥‡∏ó / ‡∏ï‡∏¥‡∏î‡πÅ‡∏û‡πá‡∏Ñ", price: 9, image: "https://lh3.googleusercontent.com/d/1JdUzWjV-sWQkS6vHCekLb7HN9Uc6g4J7" },
                { id: 2, name: "email(‡∏ô‡∏≠‡∏Å) ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡πÅ‡∏û‡πá‡∏Ñ / ‡∏ï‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥", price: 11, image: "https://lh3.googleusercontent.com/d/1JdUzWjV-sWQkS6vHCekLb7HN9Uc6g4J7" },
                { id: 3, name: "emailThai ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥ / ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡πÅ‡∏û‡πá‡∏Ñ", price: 11, image: "https://lh3.googleusercontent.com/d/1JdUzWjV-sWQkS6vHCekLb7HN9Uc6g4J7" },
                { id: 4, name: "emailThai ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡πÅ‡∏û‡πá‡∏Ñ / ‡∏ï‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥ ", price: 12, image: "https://lh3.googleusercontent.com/d/1JdUzWjV-sWQkS6vHCekLb7HN9Uc6g4J7" },
                { id: 5, name: "emailThai ‡∏ï‡∏¥‡∏î‡πÅ‡∏û‡πá‡∏Ñ / ‡∏ï‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥ ", price: 13, image: "https://lh3.googleusercontent.com/d/1JdUzWjV-sWQkS6vHCekLb7HN9Uc6g4J7" },
                { id: 6, name: "emailThai ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏™‡∏¥‡∏ó‡∏ò‡∏¥ / ‡∏ï‡∏¥‡∏î‡πÅ‡∏û‡πá‡∏Ñ ", price: 18, image: "https://lh3.googleusercontent.com/d/1JdUzWjV-sWQkS6vHCekLb7HN9Uc6g4J7" }
            ],
            inventory: {},
            topupRequests: [],
            usedSlips: [],
            salesCount: 0,
            totalTopupSum: 0,
            customUserCount: 0,
            currentUser: null,
            isAdmin: false,
            siteImages: {
                background: "",
                banner: "https://lh3.googleusercontent.com/d/1ALVIB9eXw_BXz1By7UBemWyY_0Gp-YoF",
                qr: "https://lh3.googleusercontent.com/d/1ardGOoNH5cU-qLoTaZ7VHLs8kUCriNmX",
                adminAvatar: "https://lh3.googleusercontent.com/d/12RhOdgaJigGJCiIBURsppbEyBPmBhBT7"
            }
        };

        // Real-time Database Listener
        if(db) {
            const shopRef = ref(db, 'baobei_shop_data');
            onValue(shopRef, (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤ Auth ‡πÅ‡∏•‡∏∞ Cart ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏ß‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠ Data ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï
                    const oldUser = state.currentUser;
                    const oldAdmin = state.isAdmin;
                    const oldCart = state.cart;
                    
                    state = { ...state, ...data };
                    
                    state.currentUser = oldUser;
                    state.isAdmin = oldAdmin;
                    state.cart = oldCart || [];
                    
                    updateUI(); // ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏≠‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Database ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
                } else {
                    persist();
                }
            });
        }

        window.persist = function() {
            if(!db) return;
            const dataToSave = { ...state };
            delete dataToSave.currentUser;
            delete dataToSave.isAdmin;
            delete dataToSave.cart;
            set(ref(db, 'baobei_shop_data'), dataToSave);
        };

        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö Real-time
        window.saveSiteImages = async function() {
            showLoader(true);
            const getImgValue = async (inputId, fileId, currentVal) => {
                const fileInput = document.getElementById(fileId);
                const textInput = document.getElementById(inputId).value;
                if (fileInput && fileInput.files && fileInput.files[0]) {
                    return new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = (e) => resolve(e.target.result);
                        reader.readAsDataURL(fileInput.files[0]);
                    });
                }
                return textInput || currentVal;
            };

            const updatedImages = {
                background: await getImgValue('img_bg', 'file_bg', state.siteImages.background),
                banner: await getImgValue('img_banner', 'file_banner', state.siteImages.banner),
                qr: await getImgValue('img_qr', 'file_qr', state.siteImages.qr),
                adminAvatar: await getImgValue('img_admin', 'file_admin', state.siteImages.adminAvatar)
            };

            // ‡πÉ‡∏ä‡πâ update ‡πÅ‡∏ó‡∏ô set ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≤‡∏∞‡∏à‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô siteImages
            update(ref(db, 'baobei_shop_data/siteImages'), updatedImages)
                .then(() => {
                    showLoader(false);
                    Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ (‡∏°‡∏µ‡∏ú‡∏•‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô)', 'success');
                })
                .catch(err => {
                    showLoader(false);
                    Swal.fire('Error', err.message, 'error');
                });
        };

        window.updateUI = function() {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏à‡∏≤‡∏Å State
            if(state.siteImages) {
                if (state.siteImages.background.startsWith('http') || state.siteImages.background.startsWith('data:image')) {
                    document.body.style.backgroundImage = `url('${state.siteImages.background}')`;
                    document.body.style.backgroundColor = ""; 
                } else {
                    document.body.style.backgroundImage = "none";
                    document.body.style.backgroundColor = state.siteImages.background || "var(--bg)";
                }
                
                if(document.getElementById('mainBannerImg')) document.getElementById('mainBannerImg').src = state.siteImages.banner;
                if(document.getElementById('qrCodeImg')) document.getElementById('qrCodeImg').src = state.siteImages.qr;
            }

            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
            const list = document.getElementById('productList');
            if(list && state.products) {
                list.innerHTML = state.products.map(p => {
                    const stock = state.inventory[p.id]?.length || 0;
                    return `<div class="product-card">
                        <div class="stock-tag">${stock > 0 ? '‡∏™‡∏ï‡πá‡∏≠‡∏Å: ' + stock : '‡∏´‡∏°‡∏î'}</div>
                        <img src="${p.image}" class="product-img" loading="lazy">
                        <div class="product-info">
                            <div class="product-name">${p.name}</div>
                            <div class="product-price">${p.price} ‡∏ø</div>
                            <button class="btn-buy" onclick="buyProduct(${p.id})" ${stock === 0 && !state.isAdmin ? 'disabled' : ''}>${state.isAdmin ? '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ã‡∏∑‡πâ‡∏≠' : (stock > 0 ? '‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ' : '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î')}</button>
                            <button class="btn-add-cart" onclick="addToCart(${p.id})" ${stock === 0 ? 'style="display:none"' : ''}><i class="fas fa-cart-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
                        </div>
                    </div>`;
                }).join('');
            }
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ï‡πà‡∏≤‡∏á‡πÜ
            if(document.getElementById('statSalesTotal')) document.getElementById('statSalesTotal').innerText = (state.salesCount || 0).toLocaleString();
            if(document.getElementById('statUsers')) document.getElementById('statUsers').innerText = (state.customUserCount || 0).toLocaleString();
            if(document.getElementById('statTopupTotal')) document.getElementById('statTopupTotal').innerText = Math.floor(state.totalTopupSum || 0).toLocaleString();
            
            let totalStock = 0;
            if(state.inventory) {
                Object.values(state.inventory).forEach(s => totalStock += (s ? s.length : 0));
            }
            if(document.getElementById('statStock')) document.getElementById('statStock').innerText = totalStock;

            // ... (‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Navbar/Auth ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°) ...
            renderAuthUI();
            renderChat();
        };

        // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏™‡πà‡∏á‡∏°‡∏≤ ‡πÅ‡∏ï‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Persist ---
        
        function renderAuthUI() {
            const authBtn = document.getElementById('authBtn');
            const topupBtn = document.getElementById('topupBtn');
            const historyBtn = document.getElementById('historyBtn');
            const navNickname = document.getElementById('navNickname')?.querySelector('span:first-child');

            if (state.currentUser) {
                const user = (state.currentUser === "Admin") ? { balance: 0, nickname: "Admin" } : (state.users[state.currentUser] || { balance: 0, nickname: "User" });
                if(document.getElementById('balanceDisplay')) document.getElementById('balanceDisplay').innerText = (user.balance || 0).toLocaleString();
                if(navNickname) navNickname.innerText = user.nickname || state.currentUser;
                if(document.getElementById('adminBtn')) document.getElementById('adminBtn').style.display = state.isAdmin ? "block" : "none";
                if(topupBtn) topupBtn.style.display = 'flex';
                if(historyBtn) historyBtn.style.display = 'block';
                authBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i>';
                authBtn.onclick = () => { state.currentUser = null; state.isAdmin = false; location.reload(); };
            } else {
                if(navNickname) navNickname.innerText = "‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°";
                if(topupBtn) topupBtn.style.display = 'none';
                authBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö';
                authBtn.onclick = () => toggleAuth('login');
            }
        }

        // ‡πÅ‡∏ó‡∏£‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
        window.toggleAuth = (type) => { document.getElementById('loginPage').classList.toggle('hidden', type !== 'login'); document.getElementById('registerPage').classList.toggle('hidden', type !== 'register'); };
        window.closeAuth = () => { document.getElementById('loginPage').classList.add('hidden'); document.getElementById('registerPage').classList.add('hidden'); };
        window.showPage = (p) => { document.getElementById('homePage').classList.toggle('hidden', p !== 'home'); document.getElementById('topupPage').classList.toggle('hidden', p !== 'topup'); };
        window.handleLogin = function() {
            const u = document.getElementById('loginUsername').value.trim();
            const p = document.getElementById('loginPassword').value.trim();
            if(u === 'admin' && p === 'yongchai07') {
                state.currentUser = "Admin"; state.isAdmin = true; closeAuth(); updateUI(); return;
            }
            // Logic Login ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ... (‡πÉ‡∏™‡πà‡∏ï‡∏≤‡∏°‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)
            for(let id in state.users) {
                if(state.users[id].username === u && state.users[id].password === p) {
                    state.currentUser = id; state.isAdmin = false; closeAuth(); updateUI(); return;
                }
            }
            Swal.fire('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
        }

        // ... (‡∏Ñ‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô AdminPanel, Chat, Buy, Topup ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÑ‡∏ß‡πâ‡∏ï‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°) ...
        // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÉ‡∏ô AdminPanel ‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏≠‡∏á input ‡∏ó‡∏µ‡πà‡∏°‡∏µ id ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö 'img_bg', 'img_banner' ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô

        // ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
        window.addEventListener('load', () => {
            updateUI();
        });
        
        // ‡∏Å‡πä‡∏≠‡∏õ‡∏õ‡∏µ‡πâ‡∏™‡πà‡∏ß‡∏ô AdminPanel ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ï‡πà‡∏≠‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö
    </script>
</body>
</html>
