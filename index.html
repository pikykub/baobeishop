<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Store Mobile</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- CSS ‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á --- */
        :root { --primary: #1e3a8a; --bg: #f8fafc; --white: #ffffff; }
        body { font-family: sans-serif; background: var(--bg); margin: 0; padding-bottom: 50px; }
        .navbar { background: var(--primary); color: white; padding: 15px; display: flex; justify-content: space-between; sticky; top: 0; z-index: 100; }
        .container { padding: 15px; }
        .product-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .product-card { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: 1px solid #ddd; }
        .card-action { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
        
        /* Modal Popup */
        .modal-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:none; justify-content:center; align-items:center; z-index:1000; }
        .modal-content { background:white; padding:20px; border-radius:15px; width:90%; max-height:80vh; overflow-y:auto; }
        
        /* Form */
        .form-group { margin-bottom: 10px; }
        input[type="text"], input[type="email"], textarea { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 5px; }
        .btn-primary { background: var(--primary); color: white; border: none; padding: 12px; width: 100%; border-radius: 5px; margin-top: 10px; }
        .btn-secondary { background: #64748b; color: white; border: none; padding: 12px; width: 100%; border-radius: 5px; margin-top: 5px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <div style="font-weight:bold">EMAIL STORE</div>
        <div onclick="toggleCart()" style="cursor:pointer">
            <i class="fas fa-shopping-cart"></i> ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ (<span id="cart-count">0</span>)
        </div>
    </nav>

    <div class="container" id="mainPage">
        <h2 style="text-align:center">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
        <div class="product-grid" id="productGrid"></div>
    </div>

    <div class="modal-overlay" id="cartModal">
        <div class="modal-content">
            <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h3>
            <div id="cartItems"></div>
            <hr>
            <p>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: <span id="totalPrice">0</span> ‡∏ö‡∏≤‡∏ó</p>
            <button class="btn-primary" onclick="goToCheckout()">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
            <button class="btn-secondary" onclick="toggleCart()">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡πà‡∏≠</button>
        </div>
    </div>

    <div class="container" id="checkoutPage" style="display:none;">
        <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
        <form id="orderForm">
            <div class="form-group"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠</label><input type="text" id="custName" required></div>
            <div class="form-group"><label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á</label><input type="email" id="custEmail" required></div>
            <div class="form-group"><label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label><textarea id="custAddr"></textarea></div>
            <button type="submit" class="btn-primary">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
        </form>
    </div>

    <script>
        const products = [
            { id: 1, name: "Gmail (‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û A)", price: 50 },
            { id: 2, name: "Outlook ‡πÄ‡∏Å‡πà‡∏≤ 1 ‡∏õ‡∏µ", price: 100 },
            { id: 3, name: "Hotmail ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà", price: 25 }
        ];
        let cart = [];

        function renderProducts() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = products.map(p => `
                <div class="product-card">
                    <strong>${p.name}</strong><br>‡∏£‡∏≤‡∏Ñ‡∏≤: ${p.price} ‡∏ö‡∏≤‡∏ó
                    <div class="card-action">
                        <label><input type="checkbox" onchange="updateCart(${p.id}, this)"> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</label>
                        <input type="number" id="qty-${p.id}" value="1" min="1" style="width:50px" onchange="changeQty(${p.id})">
                    </div>
                </div>
            `).join('');
        }

        function updateCart(id, chk) {
            const qty = parseInt(document.getElementById('qty-'+id).value);
            if(chk.checked) {
                cart.push({...products.find(p => p.id === id), qty});
            } else {
                cart = cart.filter(i => i.id !== id);
            }
            document.getElementById('cart-count').innerText = cart.length;
        }

        function changeQty(id) {
            const item = cart.find(i => i.id === id);
            if(item) item.qty = parseInt(document.getElementById('qty-'+id).value);
            renderCartUI();
        }

        function toggleCart() {
            const m = document.getElementById('cartModal');
            m.style.display = (m.style.display === 'flex') ? 'none' : 'flex';
            renderCartUI();
        }

        function renderCartUI() {
            let total = 0;
            document.getElementById('cartItems').innerHTML = cart.map(i => {
                total += (i.price * i.qty);
                return `<p>${i.name} x ${i.qty} = ${i.price * i.qty} ‡∏ö.</p>`;
            }).join('');
            document.getElementById('totalPrice').innerText = total;
        }

        function goToCheckout() {
            if(cart.length === 0) return alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
            document.getElementById('cartModal').style.display = 'none';
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('checkoutPage').style.display = 'block';
        }

        document.getElementById('orderForm').onsubmit = (e) => {
            e.preventDefault();
            const orderId = "EML-" + Date.now().toString().slice(-6);
            const total = document.getElementById('totalPrice').innerText;
            
            // 1. ‡πÉ‡∏™‡πà‡πÑ‡∏≠‡∏î‡∏µ‡πÑ‡∏•‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡πÄ‡∏ä‡πà‡∏ô lineId = "mylineid")
            const lineID = "@989lkmme"; 

            const bankDetails = `
                <div style="text-align:center; background:white; padding:20px; border-radius:15px; border:2px solid #1e3a8a; font-family: sans-serif;">
                    <h2 style="color:#22c55e; margin-bottom:10px;">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
                    <p>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <strong>${orderId}</strong></p>
                    <p>‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏≠‡∏ô: <strong style="color:red; font-size:1.4rem;">${total} ‡∏ö‡∏≤‡∏ó</strong></p>
                    <hr style="border:0.5px solid #eee; margin:15px 0;">
                    <p style="margin-bottom:5px;"><strong>‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ô‡∏≤‡∏Ñ‡∏¥‡∏ô‡∏†‡∏±‡∏ó‡∏£</strong></p>
                    <p style="font-size:1.2rem; margin-bottom:10px;">
                        <span id="accNum">201-2-01901-4</span>
                    </p>
                    <button onclick="copyAccount()" style="background:#e2e8f0; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; font-weight:bold; margin-bottom:10px;">
                        üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
                    </button>
                    <p>‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ: <strong>‡∏à‡∏¥‡∏ï‡∏£‡∏≤‡∏†‡∏£‡∏ì‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏£</strong></p>
                    <hr style="border:0.5px solid #eee; margin:15px 0;">
                    
                    <a href="https://line.me/ti/p/~${lineID}" target="_blank" style="text-decoration:none;">
                        <button style="background:#06C755; color:white; border:none; padding:12px; border-radius:10px; width:100%; font-weight:bold; font-size:1rem; cursor:pointer; margin-bottom:10px;">
                            üü¢ ‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô Line
                        </button>
                    </a>
                    
                    <button onclick="location.reload()" class="btn-primary" style="width:100%; padding:10px; border-radius:10px; border:none; background:#1e3a8a; color:white; font-weight:bold;">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
                </div>
            `;
            
            document.getElementById('checkoutPage').innerHTML = bankDetails;
            
            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å
            window.copyAccount = () => {
                const accNo = document.getElementById('accNum').innerText;
                navigator.clipboard.writeText(accNo).then(() => {
                    alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß: " + accNo);
                });
            };

            localStorage.setItem(orderId, JSON.stringify({ orderId, total }));
        };

        renderProducts();
    </script>
</body>
</html>

